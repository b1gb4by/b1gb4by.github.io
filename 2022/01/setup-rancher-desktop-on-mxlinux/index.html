<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>MXLinux で Rancher Desktop を動かす - BigBaBy's Blog</title><meta name=Description content="Rancher Desktop v1.0.0 がリリースされたので、実際に MXLinux で動かしてみました."><meta property="og:title" content="MXLinux で Rancher Desktop を動かす"><meta property="og:description" content="Rancher Desktop v1.0.0 がリリースされたので、実際に MXLinux で動かしてみました."><meta property="og:type" content="article"><meta property="og:url" content="https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/"><meta property="og:image" content="https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-27T20:20:47+09:00"><meta property="article:modified_time" content="2022-06-02T22:25:14+09:00"><meta property="og:site_name" content="Unavoidable"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp"><meta name=twitter:title content="MXLinux で Rancher Desktop を動かす"><meta name=twitter:description content="Rancher Desktop v1.0.0 がリリースされたので、実際に MXLinux で動かしてみました."><meta name=application-name content="BB's Blog"><meta name=apple-mobile-web-app-title content="BB's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/><link rel=prev href=https://example.com/2021/12/karpenter-deep-dive/><link rel=next href=https://example.com/2022/05/k8s-beginner-loadmap/><link rel=stylesheet href=/css/style.min.cf6878db51c51b2d04ae155284a4403dbee8db33e16c066f954c95279c271fcd.css integrity="sha256-z2h421HFGy0ErhVShKRAPb7o2zPhbAZvlUyVJ5wnH80="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="MI9tWDvB5U3u_StKcJVdMhElMqisSGg7sJaKL0XmdMg"><meta name=p:domain_verify content="7a778e3261fcb3e1ab2f290745ddfb22"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"MXLinux で Rancher Desktop を動かす","inLanguage":"ja","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/example.com\/2022\/01\/setup-rancher-desktop-on-mxlinux\/"},"image":["https:\/\/example.com\/featured-image.webp"],"genre":"posts","keywords":"kubernetes, k3s, rancher, helm, containerd, moby, linux, mxlinux","wordcount":4171,"url":"https:\/\/example.com\/2022\/01\/setup-rancher-desktop-on-mxlinux\/","datePublished":"2022-01-27T20:20:47+09:00","dateModified":"2022-06-02T22:25:14+09:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Taisuke Okamoto (BB a.k.a BigBaBy)","logo":{"@type":"ImageObject","url":"https:\/\/example.com\/images\/avatar.png","width":650,"height":650}},"author":{"@type":"Person","name":"morero"},"description":"Rancher Desktop v1.0.0 がリリースされたので、実際に MXLinux で動かしてみました."}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="BigBaBy's Blog"><span class=header-title-pre><i class='fa-solid fa-microchip fa-fw' aria-hidden=true></i></span>Unavoidable</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class='fa-solid fa-book fa-fw' aria-hidden=true></i> POST </a><a class=menu-item href=/tags/><i class='fa-solid fa-tags fa-fw' aria-hidden=true></i> TAG </a><a class=menu-item href=/categories/><i class='fa-solid fa-list fa-fw' aria-hidden=true></i> CATEGORIES </a><a class=menu-item href=/resume/><i class='fa-solid fa-user-astronaut fa-fw' aria-hidden=true></i> RESUME </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=タイトルやコンテンツを検索する... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=検索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=クリア><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=テーマを変更する><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title=言語を選択><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/2022/01/setup-rancher-desktop-on-mxlinux/ selected>Japanese</option><option value=/en/2022/01/setup-rancher-desktop-on-mxlinux/>English</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="BigBaBy's Blog"><span class=header-title-pre><i class='fa-solid fa-microchip fa-fw' aria-hidden=true></i></span>Unavoidable</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=タイトルやコンテンツを検索する... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=検索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=クリア><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>キャンセル</a></div><a class=menu-item href=/posts/ title><i class='fa-solid fa-book fa-fw' aria-hidden=true></i>POST</a><a class=menu-item href=/tags/ title><i class='fa-solid fa-tags fa-fw' aria-hidden=true></i>TAG</a><a class=menu-item href=/categories/ title><i class='fa-solid fa-list fa-fw' aria-hidden=true></i>CATEGORIES</a><a class=menu-item href=/resume/ title><i class='fa-solid fa-user-astronaut fa-fw' aria-hidden=true></i>RESUME</a><a href=javascript:void(0); class="menu-item theme-switch" title=テーマを変更する>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title=言語を選択><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/2022/01/setup-rancher-desktop-on-mxlinux/ selected>Japanese</option><option value=/en/2022/01/setup-rancher-desktop-on-mxlinux/>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>内容</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">MXLinux で Rancher Desktop を動かす</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://b1gb4by.github.io/ title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>morero</a></span>&nbsp;<span class=post-category>included in <a href=/categories/kubernetes/><i class="far fa-folder fa-fw" aria-hidden=true></i>Kubernetes</a>&nbsp;<a href=/categories/k8s/><i class="far fa-folder fa-fw" aria-hidden=true></i>k8s</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-01-27>2022-01-27</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;4171 文字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;9 分&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp, /2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/featured-image.webp title="Rancher Desktop v1.0.0 がリリースされたので、実際に MXLinux で動かしてみました."></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>内容</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#rancher-desktop-とは>Rancher Desktop とは</a></li><li><a href=#必要条件>必要条件</a><ul><li><a href=#macos>macOS</a></li><li><a href=#windowsos>WindowsOS</a></li><li><a href=#linux>Linux</a></li><li><a href=#マシンスペック>マシンスペック</a></li></ul></li><li><a href=#動作の仕組み>動作の仕組み</a></li><li><a href=#mxlinux-へのインストール>MXLinux へのインストール</a></li><li><a href=#rancher-desktop-の起動>Rancher Desktop の起動</a><ul><li><a href=#general>General</a></li><li><a href=#kubernetes-setting>Kubernetes Setting</a></li><li><a href=#supporting-utilities>Supporting Utilities</a></li><li><a href=#images>Images</a></li><li><a href=#troubleshooting>Troubleshooting</a></li></ul></li><li><a href=#検証>検証</a><ul><li><a href=#nerdctl-の使用>nerdctl の使用</a><ul><li><a href=#nginx-を起動>nginx を起動</a></li><li><a href=#コンテナの状態を確認>コンテナの状態を確認</a></li><li><a href=#namespace-を確認>namespace を確認</a></li><li><a href=#namespace-default-のプロセスを確認>namespace default のプロセスを確認</a></li></ul></li><li><a href=#helm-の使用>Helm の使用</a><ul><li><a href=#helm-に-grafana-のリポジトリを追加>Helm に Grafana のリポジトリを追加</a></li><li><a href=#helm-にリポジトリが追加されていることを確認>Helm にリポジトリが追加されていることを確認</a></li><li><a href=#追加した-grafana-リポジトリからチャートを確認>追加した Grafana リポジトリからチャートを確認</a></li><li><a href=#helm-チャートをリリース>Helm チャートをリリース</a></li></ul></li></ul></li><li><a href=#所感>所感</a></li></ul></nav></div></div><div class=content id=content><p>1 月 26 日に、<a href=https://rancherdesktop.io/ target=_blank rel="noopener noreffer">Rancher Desktop</a> が正式に <a href=https://github.com/rancher-sandbox/rancher-desktop/releases/tag/v1.0.0 target=_blank rel="noopener noreffer">v1.0.0</a> としてリリースされました.</p><p>今回は、実際に Rancher Desktop を MXLinux にインストールして動かそうと思います.</p><h2 id=rancher-desktop-とは>Rancher Desktop とは</h2><p>Rancher Desktop は Electron と Node.js をベースに構築されたデスクトップアプリケーションであり、デスクトップ上で Kubernetes とコンテナ管理を実行することができます.</p><p>また、実行する Kubernetes のバージョンを自由に選択することができます.</p><p><code>containerd</code>、または<code>Moby (dockerd)</code>を使って、コンテナイメージのビルド、プッシュ、プル、実行が可能です. ビルドしたコンテナイメージは、レジストリを必要とせず、すぐに Kubernetes で実行できます.</p><h2 id=必要条件>必要条件</h2><p>OSS のデスクトップアプリケーションで、macOS や Windows、そして Linux の様々な環境で動作させることができます. M1 にも対応しているため、ほとんどの環境で動作が可能になりました.</p><p>環境での必要条件は以下の通りです.</p><h3 id=macos>macOS</h3><ul><li><strong>macOS</strong><ul><li>Catalina 10.15 以降</li></ul></li><li><strong>CPU アーキテクチャ</strong><ul><li>Apple Silicon（M1）または VT-x 搭載の Intel CPU</li></ul></li></ul><h3 id=windowsos>WindowsOS</h3><ul><li><strong>Windows</strong><ul><li>Windows 10 ビルド 1909 以降</li><li>Home エディションにも対応</li></ul></li><li><strong>Hyper-V(仮想化機能)</strong> が有効化されている</li><li><strong>Windows Subsystem for Linux (WSL)</strong><ul><li>Rancher Desktop は、Windows 上で WSL が必要ですが、セットアップの一部として自動的にインストールされます</li><li>手動でディストリビューションをダウンロードは不要</li></ul></li></ul><h3 id=linux>Linux</h3><ul><li><code>.deb</code>や<code>.rpm</code>パッケージ、または<code>AppImages</code>をインストールできるディストリビューション</li></ul><h3 id=マシンスペック>マシンスペック</h3><ul><li>8GB のメモリー</li><li>4 コアの CPU</li></ul><h2 id=動作の仕組み>動作の仕組み</h2><p>Rancher Desktop は、他のツールをラッピングしながら、動作を実現しています.</p><p>MacOS と Linux では、<a href=https://github.com/lima-vm/lima target=_blank rel="noopener noreffer">Lima</a> や <a href=https://www.qemu.org/ target=_blank rel="noopener noreffer">QEMU</a> といった仮想マシンを活用して<code>containerd</code>または<code>dockerd</code>と Kubernetes (<a href=https://k3s.io/ target=_blank rel="noopener noreffer">k3s</a>) を実行します.</p><p>Windows システムでは、<a href=https://docs.microsoft.com/en-us/windows/wsl/ target=_blank rel="noopener noreffer">Windows Subsystem for Linux v2 (WSL2)</a> を利用しています.</p><blockquote><p>下図は <a href=https://rancherdesktop.io/ target=_blank rel="noopener noreffer">rancher</a> から引用
<img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/how-it-works-rancher-desktop.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/how-it-works-rancher-desktop.webp, /2022/01/setup-rancher-desktop-on-mxlinux/how-it-works-rancher-desktop.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/how-it-works-rancher-desktop.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/how-it-works-rancher-desktop.webp title=how-it-works-rancher-desktop width=1366 height=644></p></blockquote><p>Rancher Desktop では、<a href=https://github.com/containerd/nerdctl target=_blank rel="noopener noreffer">NERDCTL プロジェクト</a>と Docker CLI を利用して、イメージを build、push、pull する機能が用意されています.
なお、<code>nerdctl</code>と<code>docker</code>の両方が自動的にパスに入れられます. Windows ではインストーラー中に、macOS と Linux では初回実行時に行われます.</p><p>いずれのツールを使用する場合も、Rancher Desktop が適切なコンテナランタイムで実行されている必要があります.</p><p><code>nerdctl</code>の場合は、<code>containerd</code>ランタイムを使用します。docker の場合は、<code>dockerd (moby)</code>ランタイムを使用します.</p><div class="details admonition question"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw" aria-hidden=true></i>Lima について<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>Lima</strong> は WSL と似ており、自動ファイル共有とポート転送、および <code>containerd</code> を備えた Linux の仮想マシンを起動します.
Lima は macOS ホストで使われることが想定されていますが、Linux ホストでも使うことができます.</div></div></div><div class="details admonition question"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw" aria-hidden=true></i>QEMU について<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>QEMU</strong> は、OSS の PC エミュレーターです.
<code>x86</code> や <code>SPARC</code>、<code>MIPS</code> といったさまざまな CPU 上の Linux、Windows などで動作し、ほかの CPU の命令をネイティブコードに変換しながら実行できるという特徴を持ちます.</div></div></div><div class="details admonition question"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw" aria-hidden=true></i>k3s について<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>k3s</strong> は、Rancher Labs 社が発表した軽量な Kubernetes の 1 つで、小さいサイズなバイナリと、メモリ使用量が少ないを特徴としています.
最近では、IoT や Edge コンピューティングなどでの活用が期待されています.</div></div></div><div class="details admonition question"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw" aria-hidden=true></i>nerdctl について<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>nerdctl</strong> は containerd 向けのコンテナの操作ツールです. <code>containerd</code> 用の <code>docker</code> コマンドだと考えていただければと思います.</div></div></div><h2 id=mxlinux-へのインストール>MXLinux へのインストール</h2><p>Rancher Desktop を Linux ディストリビューションの 1 つである <a href=https://mxlinux.org/ target=_blank rel="noopener noreffer">MXLinux</a> にインストールしてみます.</p><p>インストール方法は<a href=https://docs.rancherdesktop.io/installation#linux target=_blank rel="noopener noreffer">公式ドキュメント</a>に従って、Rancher Desktop のリポジトリを追加し、Rancher Desktop をインストールします.</p><p>Linux へのインストールはいくつかのパッケージがありますが、MXLinux は Debian(stable) ベースのため、<code>.deb</code>パッケージを使用します.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># リポジトリを取得し、登録</span>
</span></span><span class=line><span class=cl>$ curl https://download.opensuse.org/repositories/isv:/Rancher:/stable/deb/Release.key <span class=p>|</span> sudo apt-key add -
</span></span><span class=line><span class=cl>$ sudo add-apt-repository <span class=s1>&#39;deb https://download.opensuse.org/repositories/isv:/Rancher:/stable/deb/ ./&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># パッケージ一覧を更新</span>
</span></span><span class=line><span class=cl>$ sudo apt update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Rancher Desktop をインストール</span>
</span></span><span class=line><span class=cl>$ sudo apt install rancher-desktop
</span></span></code></pre></td></tr></table></div></div><p>以上で、Rancher Desktop のインストールは完了です. 非常に簡単ですね.</p><div class="details admonition question"><div class="details-summary admonition-title"><i class="icon fas fa-question-circle fa-fw" aria-hidden=true></i>MXLinux について<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><strong>MXLinux</strong> は <a href=https://distrowatch.com/ target=_blank rel="noopener noreffer">DistroWatch.com</a> でも 注目度の高い Linux ディストリビューションです. antiX と旧 MEPIS Linux コミュニティ間の共同事業として構築されたプロジェクトでギリシャおよびアメリカにて開発されています.</div></div></div><h2 id=rancher-desktop-の起動>Rancher Desktop の起動</h2><p>インストールした Rancher Desktop を起動してみます. アプリケーション自体は非常にシンプルでした.</p><h3 id=general>General</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-general.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-general.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-general.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-general.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-general.webp title=rancher-desktop-general width=944 height=636></p><h3 id=kubernetes-setting>Kubernetes Setting</h3><p>次に、Kubernetes の設定を見てみます.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting.webp title=rancher-desktop-k8s-setting width=944 height=626></p><p><code>Kubernetes version</code>では、Kubernetes のバージョンを指定できます. 執筆時点での最新バージョンである <code>v1.23.3</code> から、最も古いバージョンで <code>v1.16.7</code> まで選択が可能です.</p><p><code>Port</code>はデフォルトでは、<code>6443</code>が設定されています.</p><p><code>Container runtime</code>では、<code>containerd</code>または<code>dockerd (moby)</code>のどちらかを選択可能です.</p><p><code>Memory (GB)</code>, <code>CPUs</code>は、メモリー、CPU のコア数を指定できます. 赤いラインまで数値を上げると、下図のように警告文が表示されます.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting-danger.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting-danger.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting-danger.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting-danger.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-k8s-setting-danger.webp title=rancher-desktop-k8s-setting-danger width=944 height=626></p><p>一度、環境をクリーンアップしたい場合は、<code>Reset Kubernetes</code>を押すことで簡単にリセットすることができます.</p><h3 id=supporting-utilities>Supporting Utilities</h3><p><code>Supporting Utilities</code>では、インストールされたツール郡が表示されています. 既にインストールされていた Docker などに対しては、丁寧に注意喚起が書かれていました.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-supporting-utilities.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-supporting-utilities.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-supporting-utilities.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-supporting-utilities.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-supporting-utilities.webp title=rancher-desktop-supporting-utilities width=944 height=626></p><h3 id=images>Images</h3><p><code>Images</code> では、Rancher Desktop で使用しているイメージが表示されています. イメージ一覧の<code>⋮</code>から<code>Scan</code>を選択すると、イメージの脆弱性を <a href=https://github.com/aquasecurity/trivy target=_blank rel="noopener noreffer">Trivy</a> を使用してスキャンしてくれる.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-images.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-images.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-images.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-images.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-images.webp title=rancher-desktop-images width=944 height=712></p><p>ここで、<code>Image Namespace</code>に注目してください. <code>containerd</code>では、Kubernetes と同様に<code>namespace</code>という概念が存在しています.
そのため、Kubenetes が <code>namespace</code>を持つことができるように、<code>containerd</code>も同じように<code>namespace</code>を持つことができます.
上図では、<code>namespace:k8s.io</code>にイメージが存在しているということになります.</p><p>実際に<code>nerdctl</code>コマンドを使用して、<code>namespace</code>を確認してみます. <code>nerdctl namespace list</code>で<code>namespace</code>の一覧を表示します.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl namespace list
</span></span><span class=line><span class=cl>NAME        CONTAINERS    IMAGES    VOLUMES
</span></span><span class=line><span class=cl>buildkit    <span class=m>0</span>             <span class=m>0</span>         <span class=m>0</span>
</span></span><span class=line><span class=cl>k8s.io      <span class=m>22</span>            <span class=m>16</span>        <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><p>実行してみると、<code>k8s.io</code>にイメージが存在していることが確認できました.</p><p>また、<code>nerdctl --namespace k8s.io ps</code>で<code>namespace:k8s.io</code>で、Rancher Desktop で作成した Kubernetes のコンテナ群が確認できます.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl --namespace k8s.io ps
</span></span><span class=line><span class=cl>CONTAINER ID    IMAGE                                               COMMAND                   CREATED           STATUS    PORTS    NAMES
</span></span><span class=line><span class=cl>1f642d94e7d5    docker.io/rancher/klipper-lb:v0.3.4                 <span class=s2>&#34;entry&#34;</span>                   <span class=m>50</span> minutes ago    Up                 k8s://kube-system/svclb-traefik-svnfr/lb-port-443
</span></span><span class=line><span class=cl>2ca56d5f0874    docker.io/rancher/mirrored-library-traefik:2.5.6    <span class=s2>&#34;/entrypoint.sh --gl…&#34;</span>    <span class=m>49</span> minutes ago    Up                 k8s://kube-system/traefik-6bb96f9bd8-cflf4/traefik
</span></span><span class=line><span class=cl>2f1c800451cf    docker.io/rancher/mirrored-coredns-coredns:1.8.6    <span class=s2>&#34;/coredns -conf /etc…&#34;</span>    <span class=m>49</span> minutes ago    Up                 k8s://kube-system/coredns-5789895cd-wgxlq/coredns
</span></span><span class=line><span class=cl>56bd8fba2fda    docker.io/rancher/klipper-lb:v0.3.4                 <span class=s2>&#34;entry&#34;</span>                   <span class=m>50</span> minutes ago    Up                 k8s://kube-system/svclb-traefik-svnfr/lb-port-80
</span></span><span class=line><span class=cl>5908afd18045    docker.io/rancher/mirrored-pause:3.6                <span class=s2>&#34;/pause&#34;</span>                  <span class=m>49</span> minutes ago    Up                 k8s://kube-system/coredns-5789895cd-wgxlq
</span></span><span class=line><span class=cl>8c16131e6d1b    docker.io/rancher/mirrored-pause:3.6                <span class=s2>&#34;/pause&#34;</span>                  <span class=m>50</span> minutes ago    Up                 k8s://kube-system/svclb-traefik-svnfr
</span></span><span class=line><span class=cl>95b859fec9ed    docker.io/rancher/mirrored-pause:3.6                <span class=s2>&#34;/pause&#34;</span>                  <span class=m>49</span> minutes ago    Up                 k8s://kube-system/local-path-provisioner-6c79684f77-plbxh
</span></span><span class=line><span class=cl>a0656b86ab35    docker.io/rancher/local-path-provisioner:v0.0.21    <span class=s2>&#34;local-path-provisio…&#34;</span>    <span class=m>49</span> minutes ago    Up                 k8s://kube-system/local-path-provisioner-6c79684f77-plbxh/local-path-provisioner
</span></span><span class=line><span class=cl>a5c31106d6d7    docker.io/rancher/mirrored-pause:3.6                <span class=s2>&#34;/pause&#34;</span>                  <span class=m>49</span> minutes ago    Up                 k8s://kube-system/traefik-6bb96f9bd8-cflf4
</span></span><span class=line><span class=cl>c9417746b27d    docker.io/rancher/mirrored-pause:3.6                <span class=s2>&#34;/pause&#34;</span>                  <span class=m>49</span> minutes ago    Up                 k8s://kube-system/metrics-server-7cd5fcb6b7-4cbkd
</span></span><span class=line><span class=cl>ce64e7b0a242    docker.io/rancher/mirrored-metrics-server:v0.5.2    <span class=s2>&#34;/metrics-server --c…&#34;</span>    <span class=m>49</span> minutes ago    Up                 k8s://kube-system/metrics-server-7cd5fcb6b7-4cbkd/metrics-server
</span></span></code></pre></td></tr></table></div></div><h3 id=troubleshooting>Troubleshooting</h3><p><code>Troubleshooting</code>では、ログの有効化、また Rancher Desktop 自体の初期化ができます.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-troubleshooting.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-troubleshooting.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-troubleshooting.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-troubleshooting.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-troubleshooting.webp title=rancher-desktop-troubleshooting width=1077 height=712></p><h2 id=検証>検証</h2><p>Rancher Desktop 上で、実際にコンテナなどを動かして見ます.</p><h3 id=nerdctl-の使用>nerdctl の使用</h3><p><code>nerdctl</code>コマンドを使用して、nginx を起動してみます. <code>namespace</code> は未指定の場合、デフォルトで<code>default</code>に配置されます.</p><h4 id=nginx-を起動>nginx を起動</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl run -d -p 9999:80 nginx
</span></span><span class=line><span class=cl>docker.io/library/nginx:latest:                                                   resolved       <span class=p>|</span>++++++++++++++++++++++++++++++++++++++<span class=p>|</span>
</span></span><span class=line><span class=cl>index-sha256:2834dc507516af02784808c5f48b7cbe38b8ed5d0f4837f16e78d00deb7e7767:    <span class=k>done</span>           <span class=p>|</span>++++++++++++++++++++++++++++++++++++++<span class=p>|</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>elapsed: 7.2 s                                                                    total:  54.1 M <span class=o>(</span>7.5 MiB/s<span class=o>)</span>
</span></span><span class=line><span class=cl>484e86556e00843200c97b5aa779ba81a9016796e23964e5a0cac27159de444e
</span></span></code></pre></td></tr></table></div></div><h4 id=コンテナの状態を確認>コンテナの状態を確認</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl ps
</span></span><span class=line><span class=cl>CONTAINER ID    IMAGE                             COMMAND                   CREATED          STATUS    PORTS                   NAMES
</span></span><span class=line><span class=cl>484e86556e00    docker.io/library/nginx:latest    <span class=s2>&#34;/docker-entrypoint.…&#34;</span>    <span class=m>6</span> minutes ago    Up        0.0.0.0:9999-&gt;80/tcp    nginx-484e8
</span></span></code></pre></td></tr></table></div></div><h4 id=namespace-を確認>namespace を確認</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl namespace list
</span></span><span class=line><span class=cl>NAME      CONTAINERS IMAGES VOLUMES
</span></span><span class=line><span class=cl>buildkit  <span class=m>0</span>          <span class=m>0</span>      <span class=m>0</span>
</span></span><span class=line><span class=cl>default   <span class=m>1</span>          <span class=m>1</span>      <span class=m>0</span>
</span></span><span class=line><span class=cl>k8s.io    <span class=m>22</span>         <span class=m>16</span>     <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=namespace-default-のプロセスを確認>namespace default のプロセスを確認</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/nerdctl --namespace default ps
</span></span><span class=line><span class=cl>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
</span></span><span class=line><span class=cl>484e86556e00 docker.io/library/nginx:latest <span class=s2>&#34;/docker-entrypoint.…&#34;</span> <span class=m>11</span> minutes ago Up 0.0.0.0:9999-&gt;80/tcp nginx-484e8
</span></span></code></pre></td></tr></table></div></div><p>また、Rancher Desktop からも<code>namespace:default</code>に nginx イメージを確認することができます.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-run-nginx.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-run-nginx.webp, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-run-nginx.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-run-nginx.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/rancher-desktop-run-nginx.webp title=rancher-desktop-run-nginx width=1077 height=386></p><p>最後に、<code>localhost:9999</code>にアクセスして、nginx の起動を確認してみます.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/run-nginx.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/run-nginx.webp, /2022/01/setup-rancher-desktop-on-mxlinux/run-nginx.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/run-nginx.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/run-nginx.webp title=run-nginx width=713 height=311></p><h3 id=helm-の使用>Helm の使用</h3><p>Rancher Desktop では、起動時に Helm もインストールされるので、Helm を使って Kubernetes に Grafana をデプロイしてみます.</p><h4 id=helm-に-grafana-のリポジトリを追加>Helm に Grafana のリポジトリを追加</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/helm repo add grafana https://grafana.github.io/helm-charts
</span></span></code></pre></td></tr></table></div></div><h4 id=helm-にリポジトリが追加されていることを確認>Helm にリポジトリが追加されていることを確認</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/helm repo list
</span></span><span class=line><span class=cl>NAME    URL
</span></span><span class=line><span class=cl>grafana https://grafana.github.io/helm-charts
</span></span></code></pre></td></tr></table></div></div><h4 id=追加した-grafana-リポジトリからチャートを確認>追加した Grafana リポジトリからチャートを確認</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/helm search repo grafana
</span></span><span class=line><span class=cl>NAME                            CHART VERSION   APP VERSION DESCRIPTION
</span></span><span class=line><span class=cl>grafana/grafana                 6.21.1          8.3.4       The leading tool <span class=k>for</span> querying and visualizing t...
</span></span><span class=line><span class=cl>grafana/grafana-agent-operator  0.1.5           0.22.0      A Helm chart <span class=k>for</span> Grafana Agent Operator
</span></span><span class=line><span class=cl>grafana/enterprise-logs         2.0.0           v1.3.0      Grafana Enterprise Logs
</span></span><span class=line><span class=cl>grafana/enterprise-metrics      1.7.3           v1.6.1      Grafana Enterprise Metrics
</span></span><span class=line><span class=cl>grafana/fluent-bit              2.3.0           v2.1.0      Uses fluent-bit Loki go plugin <span class=k>for</span> gathering lo...
</span></span><span class=line><span class=cl>grafana/loki                    2.9.1           v2.4.2      Loki: like Prometheus, but <span class=k>for</span> logs.
</span></span><span class=line><span class=cl>grafana/loki-canary             0.5.1           2.4.1       Helm chart <span class=k>for</span> Grafana Loki Canary
</span></span><span class=line><span class=cl>grafana/loki-distributed        0.42.0          2.4.2       Helm chart <span class=k>for</span> Grafana Loki in microservices mode
</span></span><span class=line><span class=cl>grafana/loki-simple-scalable    0.2.0           2.4.2       Helm chart <span class=k>for</span> Grafana Loki in simple, scalable...
</span></span><span class=line><span class=cl>grafana/loki-stack              2.5.1           v2.1.0      Loki: like Prometheus, but <span class=k>for</span> logs.
</span></span><span class=line><span class=cl>grafana/promtail                3.10.0          2.4.2       Promtail is an agent which ships the contents o...
</span></span><span class=line><span class=cl>grafana/tempo                   0.13.0          1.3.0       Grafana Tempo Single Binary Mode
</span></span><span class=line><span class=cl>grafana/tempo-distributed       0.15.0          1.3.0       Grafana Tempo in MicroService mode
</span></span><span class=line><span class=cl>grafana/tempo-vulture           0.2.0           1.3.0       Grafana Tempo Vulture - A tool to monitor Tempo...
</span></span></code></pre></td></tr></table></div></div><h4 id=helm-チャートをリリース>Helm チャートをリリース</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/kubectl create namespace monitoring
</span></span><span class=line><span class=cl>$ ./.local/bin/helm install grafana --namespace monitoring grafana/grafana
</span></span><span class=line><span class=cl>W0128 03:37:33.477723  <span class=m>218028</span> warnings.go:70<span class=o>]</span> policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+
</span></span><span class=line><span class=cl>W0128 03:37:33.480386  <span class=m>218028</span> warnings.go:70<span class=o>]</span> policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+
</span></span><span class=line><span class=cl>W0128 03:37:33.538004  <span class=m>218028</span> warnings.go:70<span class=o>]</span> policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+
</span></span><span class=line><span class=cl>W0128 03:37:33.538201  <span class=m>218028</span> warnings.go:70<span class=o>]</span> policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+
</span></span><span class=line><span class=cl>NAME: grafana
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri Jan <span class=m>28</span> 03:37:32 <span class=m>2022</span>
</span></span><span class=line><span class=cl>NAMESPACE: monitoring
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>1</span>
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>1. Get your <span class=s1>&#39;admin&#39;</span> user password by running:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   kubectl get secret --namespace monitoring grafana -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&#34;{.data.admin-password}&#34;</span> <span class=p>|</span> base64 --decode <span class=p>;</span> <span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2. The Grafana server can be accessed via port <span class=m>80</span> on the following DNS name from within your cluster:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   grafana.monitoring.svc.cluster.local
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   Get the Grafana URL to visit by running these commands in the same shell:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>     <span class=nb>export</span> <span class=nv>POD_NAME</span><span class=o>=</span><span class=k>$(</span>kubectl get pods --namespace monitoring -l <span class=s2>&#34;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana&#34;</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&#34;{.items[0].metadata.name}&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>     kubectl --namespace monitoring port-forward <span class=nv>$POD_NAME</span> <span class=m>3000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>3. Login with the password from step <span class=m>1</span> and the username: admin
</span></span><span class=line><span class=cl><span class=c1>#################################################################################</span>
</span></span><span class=line><span class=cl><span class=c1>######   WARNING: Persistence is disabled!!! You will lose your data when   #####</span>
</span></span><span class=line><span class=cl><span class=c1>######            the Grafana pod is terminated.                            #####</span>
</span></span><span class=line><span class=cl><span class=c1>#################################################################################</span>
</span></span></code></pre></td></tr></table></div></div><p>上記の手順に従って、正常に Grafana にログインすることができました.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2022/01/setup-rancher-desktop-on-mxlinux/grafana-dashboard.webp data-srcset="/2022/01/setup-rancher-desktop-on-mxlinux/grafana-dashboard.webp, /2022/01/setup-rancher-desktop-on-mxlinux/grafana-dashboard.webp 1.5x, /2022/01/setup-rancher-desktop-on-mxlinux/grafana-dashboard.webp 2x" data-sizes=auto alt=/2022/01/setup-rancher-desktop-on-mxlinux/grafana-dashboard.webp title=grafana-dashboard width=883 height=593></p><p>最後に、<code>kubectl</code>コマンドを使って Grafana が立ち上がっていることを確認します.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./.local/bin/kubectl get all --namespace monitoring
</span></span><span class=line><span class=cl>NAME                           READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/grafana-6b9d4f7f86-mwb4q   1/1     Running   <span class=m>0</span>          15m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME              TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>   AGE
</span></span><span class=line><span class=cl>service/grafana   ClusterIP   10.43.218.65   &lt;none&gt;        80/TCP    15m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/grafana   1/1     <span class=m>1</span>            <span class=m>1</span>           15m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/grafana-6b9d4f7f86   <span class=m>1</span>         <span class=m>1</span>         <span class=m>1</span>       15m
</span></span></code></pre></td></tr></table></div></div><p>以上のように、Rancher Desktop を起動するだけでアプリケーションの開発やデプロイが簡単に行うことができました.</p><h2 id=所感>所感</h2><p>今回は、v1.0.0 がリリースされた Rancher Desktop を触ってみましたが、非常に完成度の高いツールでした. <code>containerd</code>、<code>nerdctl</code>を初めて触る方も Rancher Desktop は良い機会だと思います.</p><p>昨年、<a href=https://www.docker.com/blog/updating-product-subscriptions/ target=_blank rel="noopener noreffer">Docker Desktop が有料化</a>が大きなニュースとなり、それに伴い、密かに代替案として注目されていた Rancher Desktop ですが、
Docker Desktop から乗り換えたとしても遜色なく利用できるかと思います. 万が一、Docker のランタイムを使用したいと思えば、Rancher Desktop 上から切り替えれば良いので、大して手間は掛かりません.</p><p>また、Kubernetes のバージョンをスムーズに切り替えられるのも個人的には大きなメリットなのかなと思います.</p><p>これから、コンテナを利用する手段の 1 つとして、広く普及していく可能性は大いにあり得るので、今後の動向に注目していきたいと思います.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新日: 2022-06-02&nbsp;<a class=git-hash href=https://github.com/b1gb4by/commit/c8ca32a73797fe06dfe4cb47bc76edd1d95d2cfc target=_blank title="commit by morero(taisuke.1202morero@gmail.com) c8ca32a73797fe06dfe4cb47bc76edd1d95d2cfc: 💪 Change hugo theme">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>c8ca32a</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2022/01/setup-rancher-desktop-on-mxlinux/index.md target=_blank>Markdownを読む</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="シェアする Twitter" data-sharer=twitter data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/ data-title="MXLinux で Rancher Desktop を動かす" data-via=taisuke_bigbaby data-hashtags=kubernetes,k3s,rancher,helm,containerd,moby,linux,mxlinux><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする Facebook" data-sharer=facebook data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/ data-hashtag=kubernetes><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする Linkedin" data-sharer=linkedin data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする Hacker News" data-sharer=hackernews data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/ data-title="MXLinux で Rancher Desktop を動かす"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする Reddit" data-sharer=reddit data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする Line" data-sharer=line data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/ data-title="MXLinux で Rancher Desktop を動かす"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="シェアする 微博" data-sharer=weibo data-url=https://example.com/2022/01/setup-rancher-desktop-on-mxlinux/ data-title="MXLinux で Rancher Desktop を動かす"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/kubernetes/>kubernetes</a>,&nbsp;<a href=/tags/k3s/>k3s</a>,&nbsp;<a href=/tags/rancher/>rancher</a>,&nbsp;<a href=/tags/helm/>helm</a>,&nbsp;<a href=/tags/containerd/>containerd</a>,&nbsp;<a href=/tags/moby/>moby</a>,&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/mxlinux/>mxlinux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>戻る</a></span>&nbsp;|&nbsp;<span><a href=/>ホーム</a></span></section></div><div class=post-nav><a href=/2021/12/karpenter-deep-dive/ class=prev rel=prev title="Karpenter Deep Dive"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Karpenter Deep Dive</a>
<a href=/2022/05/k8s-beginner-loadmap/ class=next rel=next title=Kubernetes初学者ロードマップ>Kubernetes初学者ロードマップ<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://b1gb4by.github.io/ target=_blank>b1gb4by</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=トップに戻る><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=コメントを見る><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"クリップボードにコピー",maxShownLines:50},comment:{},lightgallery:!0,search:{algoliaAppID:"PASDMWALPK",algoliaIndex:"index.ja",algoliaSearchKey:"b42948e51daaa93df92381c8e2ac0f93",highlightTag:"em",maxResultLength:10,noResultsFound:"該当する結果はありません",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.b0df51c2c57145081cc73960e9aa780e6f5f56d06cf4ef0f96da8ce1619d1e12.js integrity="sha256-sN9RwsVxRQgcxzlg6ap4Dm9fVtBs9O8PltqM4WGdHhI="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BRRNK5J7PW",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-BRRNK5J7PW" async></script></body></html>